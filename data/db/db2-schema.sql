-- Schema DB2 per gestione dipendenti
-- Tabella dei dipartimenti
CREATE TABLE DIPARTIMENTI (
    ID_DIPARTIMENTO INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY,
    NOME_DIPARTIMENTO VARCHAR(15) NOT NULL,
    PRIMARY KEY (ID_DIPARTIMENTO)
);

-- Tabella delle posizioni lavorative
CREATE TABLE POSIZIONI (
    ID_POSIZIONE INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY,
    NOME_POSIZIONE VARCHAR(20) NOT NULL,
    STIPENDIO_BASE DECIMAL(8,2) NOT NULL,
    ID_DIPARTIMENTO INTEGER NOT NULL,
    PRIMARY KEY (ID_POSIZIONE),
    FOREIGN KEY (ID_DIPARTIMENTO) REFERENCES DIPARTIMENTI(ID_DIPARTIMENTO)
);

-- Tabella dei dipendenti
CREATE TABLE DIPENDENTI (
    ID_DIPENDENTE INTEGER NOT NULL,
    NOME VARCHAR(30) NOT NULL,
    ID_POSIZIONE INTEGER NOT NULL,
    DATA_ASSUNZIONE DATE,
    PRIMARY KEY (ID_DIPENDENTE),
    FOREIGN KEY (ID_POSIZIONE) REFERENCES POSIZIONI(ID_POSIZIONE)
);

-- Inserimento dei dipartimenti
INSERT INTO DIPARTIMENTI (NOME_DIPARTIMENTO) VALUES
    ('Tecnologia'),
    ('Management'),
    ('Analisi Dati'),
    ('Amministrazione'),
    ('Supporto'),
    ('Risorse Umane'),
    ('Progettazione'),
    ('Finanza'),
    ('Consulenza'),
    ('Coordinamento'),
    ('Generale');

-- Inserimento delle posizioni con stipendi base
INSERT INTO POSIZIONI (NOME_POSIZIONE, STIPENDIO_BASE, ID_DIPARTIMENTO) VALUES
    ('Sviluppatore', 50000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Tecnologia')),
    ('Direttrice', 85000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Management')),
    ('Analista', 55000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Analisi Dati')),
    ('Amministratrice', 60000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Amministrazione')),
    ('Tecnico', 45000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Supporto')),
    ('Responsabile HR', 65000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Risorse Umane')),
    ('Progettista', 57000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Progettazione')),
    ('Contabile', 52000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Finanza')),
    ('Consulente', 70000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Consulenza')),
    ('Coordinatrice', 62000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Coordinamento')),
    ('Programmatore', 50000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Tecnologia')),
    ('Responsabile IT', 65000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Tecnologia')),
    ('Ingegnere', 58000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Tecnologia')),
    ('Segretaria', 45000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Amministrazione')),
    ('Commerciale', 55000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Generale')),
    ('UX Designer', 53000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Tecnologia')),
    ('Sistemista', 52000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Tecnologia')),
    ('Revisore', 54000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Finanza')),
    ('Architetto SW', 62000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Tecnologia')),
    ('Formatrice', 49000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Risorse Umane')),
    ('Security Officer', 60000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Tecnologia')),
    ('Ricercatrice', 58000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Analisi Dati')),
    ('Tecnico Reti', 48000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Supporto')),
    ('Marketing', 53000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Generale')),
    ('DBA', 58000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Tecnologia')),
    ('Project Manager', 65000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Coordinamento')),
    ('DevOps', 56000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Tecnologia')),
    ('Recruiter', 50000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Risorse Umane')),
    ('Web Developer', 51000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Tecnologia')),
    ('Quality Assurance', 53000.00, (SELECT ID_DIPARTIMENTO FROM DIPARTIMENTI WHERE NOME_DIPARTIMENTO = 'Tecnologia'));

-- Inserimento dei dipendenti
INSERT INTO DIPENDENTI (ID_DIPENDENTE, NOME, ID_POSIZIONE, DATA_ASSUNZIONE) VALUES
    (10001, 'Marco Rossi', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Sviluppatore'), '2022-01-15'),
    (10002, 'Giulia Bianchi', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Direttrice'), '2021-05-10'),
    (10003, 'Luca Verdi', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Analista'), '2022-03-22'),
    (10004, 'Francesca Romano', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Amministratrice'), '2022-02-08'),
    (10005, 'Paolo Esposito', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Tecnico'), '2023-04-17'),
    (10006, 'Chiara Marino', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Responsabile HR'), '2021-11-30'),
    (10007, 'Andrea Ferrara', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Progettista'), '2022-07-05'),
    (10008, 'Sofia Ricci', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Contabile'), '2023-01-20'),
    (10009, 'Matteo Conti', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Consulente'), '2021-09-14'),
    (10010, 'Elena Martini', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Coordinatrice'), '2022-10-03'),
    (10011, 'Roberto Lombardi', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Programmatore'), '2023-02-15'),
    (10012, 'Alessandra Moretti', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Responsabile IT'), '2021-08-12'),
    (10013, 'Stefano Gallo', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Ingegnere'), '2022-05-28'),
    (10014, 'Laura Santoro', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Segretaria'), '2023-03-10'),
    (10015, 'Giovanni Costa', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Commerciale'), '2022-04-19'),
    (10016, 'Valentina Ferrari', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'UX Designer'), '2023-06-01'),
    (10017, 'Davide Greco', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Sistemista'), '2021-12-07'),
    (10018, 'Martina Russo', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Revisore'), '2022-09-22'),
    (10019, 'Federico Marini', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Architetto SW'), '2023-01-30'),
    (10020, 'Silvia Rizzo', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Formatrice'), '2022-11-15'),
    (10021, 'Antonio Ferretti', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Security Officer'), '2021-10-05'),
    (10022, 'Elisa Colombo', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Ricercatrice'), '2023-04-28'),
    (10023, 'Claudio Marchetti', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Tecnico Reti'), '2022-08-03'),
    (10024, 'Cristina De Luca', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Marketing'), '2021-07-17'),
    (10025, 'Daniele Barbieri', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'DBA'), '2022-12-12'),
    (10026, 'Simona Vitale', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Project Manager'), '2023-05-07'),
    (10027, 'Massimo Serra', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'DevOps'), '2022-06-20'),
    (10028, 'Roberta Fabbri', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Recruiter'), '2021-11-25'),
    (10029, 'Lorenzo Pellegrini', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Web Developer'), '2023-03-15'),
    (10030, 'Serena Caruso', (SELECT ID_POSIZIONE FROM POSIZIONI WHERE NOME_POSIZIONE = 'Quality Assurance'), '2022-07-30');